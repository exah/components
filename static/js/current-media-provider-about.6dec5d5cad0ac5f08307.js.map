{"version":3,"sources":["webpack:///./src/box/index.js","webpack:///./src/current-media-provider/about.mdx","webpack:///./src/current-media-provider/index.js"],"names":["BorderBox","Object","_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__","Base","target","name","styles","displayName","propTypes","assign","Box","system","MDXContent","props","_this","_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","layout","_this$props","components","_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_7__","id","parentName","className","docz__WEBPACK_IMPORTED_MODULE_8__","__position","__code","__scope","CurrentMediaProvider","CurrentMediaConsumer","_index__WEBPACK_IMPORTED_MODULE_9__","media","mobile","desktop","state","_box__WEBPACK_IMPORTED_MODULE_10__","currentMediaKey","React","Component","INITIAL_STATE","createContext","Provider","Consumer","mediaKey","mediaQueryList","setState","prevState","nextMediaKey","slice","matches","push","index","indexOf","splice","_this2","theme","mediaList","entries","map","_ref","_ref2","_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","mediaQuery","window","matchMedia","listeners","_ref3","_ref4","setCurrentMedia","listener","addListener","removeListener","fn","react__WEBPACK_IMPORTED_MODULE_8___default","value","children","CurrentMediaProviderWithTheme","withTheme","withCurrentMedia","BaseComponent"],"mappings":"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","file":"static/js/current-media-provider-about.64fcd368.js","sourcesContent":["import styled from '@emotion/styled'\nimport { system } from 'pss'\nimport { Base } from '../base'\n\nconst BorderBox = styled(Base)`\n  box-sizing: border-box;\n`\n\nBorderBox.displayName = 'BorderBox'\nBorderBox.propTypes = { ...Base.propTypes }\n\nconst Box = styled(BorderBox)(system)\n\nBox.displayName = 'Box'\nBox.propTypes = { ...BorderBox.propTypes, ...system.propTypes }\n\nexport {\n  Box,\n  BorderBox\n}\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz'\nimport { CurrentMediaProvider, CurrentMediaConsumer } from './index'\nimport { Box } from '../box'\n\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"currentmediaprovider\"}}>{`CurrentMediaProvider`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"description\"}}>{`Description`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Watch `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`media`}</MDXTag>{` defined in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`theme`}</MDXTag>{` for changes and pass currently active media as `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`currentMediaKey`}</MDXTag>{` prop.`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"usage\"}}>{`Usage`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`import { CurrentMediaProvider, CurrentMediaConsumer, withCurrentMedia } from 'pss-components'\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`import { ThemeProvider } from 'emotion-theming'\n\n<ThemeProvider theme={{ media: { sm: '(max-width: 600px)' } }}>\n  <CurrentMediaProvider>\n    {/* components */}\n  </CurrentMediaProvider>\n</ThemeProvider>\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`import { withCurrentMedia } from 'pss-components'\n\nconst MediaComponent = withCurrentMedia(Component)\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"examples\"}}>{`Examples`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`With values from `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`media`}</MDXTag>{` prop:`}</MDXTag>\n<Playground __position={0} __code={`<CurrentMediaProvider\n  media={{ mobile: \\'(max-width: 600px)\\', desktop: \\'(min-width: 601px)\\' }}\n>\n  <CurrentMediaConsumer>\n    {state => <Box>Current media: {state.currentMediaKey}</Box>}\n  </CurrentMediaConsumer>\n</CurrentMediaProvider>`} __scope={{props: this ? this.props : props,CurrentMediaProvider,CurrentMediaConsumer,Box}}>\n  <CurrentMediaProvider media={{ mobile: '(max-width: 600px)', desktop: '(min-width: 601px)' }}>\n    <CurrentMediaConsumer>\n      {(state) => (\n        <Box>\n          Current media: {state.currentMediaKey}\n        </Box>\n      )}\n    </CurrentMediaConsumer>\n  </CurrentMediaProvider>\n</Playground>\n<MDXTag name=\"p\" components={components}>{`From `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`theme`}</MDXTag>{`:`}</MDXTag>\n<Playground __position={1} __code={`<CurrentMediaProvider>\n  <CurrentMediaConsumer>\n    {state => <Box>Current media: {state.currentMediaKey}</Box>}\n  </CurrentMediaConsumer>\n</CurrentMediaProvider>`} __scope={{props: this ? this.props : props,CurrentMediaProvider,CurrentMediaConsumer,Box}}>\n  <CurrentMediaProvider>\n    <CurrentMediaConsumer>\n      {(state) => (\n        <Box>\n          Current media: {state.currentMediaKey}\n        </Box>\n      )}\n    </CurrentMediaConsumer>\n  </CurrentMediaProvider>\n</Playground>\n           </MDXTag>\n  }\n}\n  ","import PropTypes from 'prop-types'\nimport React, { createContext, Component } from 'react'\nimport { withTheme } from 'emotion-theming'\n\nconst INITIAL_STATE = {\n  currentMediaKey: []\n}\n\nconst { Provider, Consumer } = createContext(INITIAL_STATE)\n\nclass CurrentMediaProvider extends Component {\n  static defaultProps = {\n    theme: {},\n    media: null\n  }\n  static propTypes = {\n    theme: PropTypes.object.isRequired,\n    media: PropTypes.object\n  }\n  state = INITIAL_STATE\n  listeners = []\n  setCurrentMedia = (mediaKey, mediaQueryList) => {\n    this.setState((prevState) => {\n      const nextMediaKey = prevState.currentMediaKey.slice(0)\n\n      if (mediaQueryList.matches) {\n        nextMediaKey.push(mediaKey)\n      } else {\n        const index = nextMediaKey.indexOf(mediaKey)\n        if (index === -1) return\n        nextMediaKey.splice(index, 1)\n      }\n\n      return {\n        currentMediaKey: nextMediaKey\n      }\n    })\n  }\n  componentDidMount () {\n    const { media, theme } = this.props\n\n    const mediaList = Object.entries(media || theme.media || {}).map(\n      ([ mediaKey, mediaQuery ]) => [ mediaKey, window.matchMedia(mediaQuery) ]\n    )\n\n    this.listeners = mediaList.map(([ mediaKey, mediaQueryList ]) => {\n      this.setCurrentMedia(mediaKey, mediaQueryList)\n      const listener = () => this.setCurrentMedia(mediaKey, mediaQueryList)\n\n      mediaQueryList.addListener(listener)\n      return () => mediaQueryList.removeListener(listener)\n    })\n  }\n  componentWillUnmount () {\n    this.listeners.map((fn) => fn())\n  }\n  render () {\n    return (\n      <Provider value={this.state}>\n        {this.props.children}\n      </Provider>\n    )\n  }\n}\n\nconst CurrentMediaProviderWithTheme = withTheme(CurrentMediaProvider)\n\nconst withCurrentMedia = (BaseComponent) => (props) => (\n  <Consumer>\n    {(state) => <BaseComponent {...state} {...props} />}\n  </Consumer>\n)\n\nexport {\n  CurrentMediaProviderWithTheme as CurrentMediaProvider,\n  Consumer as CurrentMediaConsumer,\n  withCurrentMedia\n}\n"],"sourceRoot":""}